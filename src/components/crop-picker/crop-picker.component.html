<div class="fixed inset-0 bg-black/50 z-20 flex items-center justify-center" (click)="closePicker()">
  <div class="bg-gray-800 border border-gray-600 rounded-lg p-4 shadow-2xl animate-scale-in" (click)="$event.stopPropagation()">
    <h3 class="text-lg font-bold text-center text-white mb-4">Plant a Crop</h3>
    <div class="grid grid-cols-3 gap-4">
      @for (crop of availableCrops; track crop.id) {
        <button 
          (click)="selectCrop(crop.id)"
          [disabled]="playerCoins < crop.plantCost"
          class="flex flex-col items-center p-3 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"
          [class]="playerCoins >= crop.plantCost ? 'bg-gray-700 hover:bg-green-700/50' : 'bg-gray-700'">
          <span class="text-4xl">{{ crop.growthStages[crop.growthStages.length - 1].asset }}</span>
          <span class="mt-1 text-sm font-semibold">{{ crop.name }}</span>
          <div class="flex items-center text-xs mt-1" [class]="playerCoins >= crop.plantCost ? 'text-yellow-400' : 'text-red-400'">
             <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zm-1.13-7.85a.75.75 0 11-1.06-1.06L10 11.06l2.19-2.17a.75.75 0 011.06 1.06L11.06 12l2.17 2.19a.75.75 0 01-1.06 1.06L10 13.06l-2.19 2.17a.75.75 0 01-1.06-1.06L8.94 12l-2.17-2.19z" clip-rule="evenodd"></path></svg>
             <span>{{ crop.plantCost }}</span>
          </div>
        </button>
      }
    </div>
  </div>
</div>

<style>
  .animate-scale-in {
    animation: scaleIn 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
  }
  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
</style>
