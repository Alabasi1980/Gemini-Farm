# 1. الآليات الأساسية (Core Mechanics)

---

هذا المستند يشرح بالتفصيل الآليات الأساسية التي تشكل تجربة اللعب اليومية في Gemini Farm.

## 1. شبكة المزرعة (The Farm Grid)

شبكة المزرعة هي المساحة الأساسية التي يتفاعل معها اللاعب. إنها عبارة عن عالم ثلاثي الأبعاد وهمي (Isometric) منظم ومقسم إلى مربعات.

-   **الأبعاد:** `31x31` مربعًا، مما يوفر مساحة واسعة للتوسع على المدى الطويل.
-   **حالات المربعات (Tile States):** كل مربع في الشبكة يمكن أن يكون في إحدى الحالات التالية:
    -   `locked`: أرض مقفلة لا يمكن استخدامها بعد.
    -   `free_space`: أرض مفتوحة يمكن وضع المباني والديكورات عليها.
    -   `empty_plot`: قطعة أرض جاهزة للزراعة.
    -   `planted_plot`: قطعة أرض مزروعة حاليًا بمحصول.

### نظام التوسع (Expansion System)

يبدأ اللاعب بمساحة صغيرة (`7x7` مربعات) في وسط الشبكة. يمكنه توسيع مزرعته عن طريق شراء "شرائح" جديدة من الأرض.

-   **آلية التوسع:** عندما ينقر اللاعب على مربع `locked` مجاور لأرضه، يظهر له عرض لشراء شريط من الأرض (`1x7` مربعات).
-   **تكلفة التوسع:** التكلفة تزداد بشكل كبير مع كل عملية شراء، بناءً على المعادلة التالية:
    `التكلفة = (التكلفة الأساسية * (المضاعف ^ عدد التوسعات السابقة))`
    -   **التكلفة الأساسية:** 800 Coins
    -   **المضاعف:** 1.35
-   هذا النظام يضمن أن التوسع يصبح هدفًا استراتيجيًا طويل الأمد.

---

## 2. الزراعة والمحاصيل (Farming & Crops)

الزراعة هي النشاط الأساسي في اللعبة.

### دورة حياة المحصول:

1.  **الزراعة:** ينقر اللاعب على `empty_plot` ويختار محصولًا لزراعته من قائمة المحاصيل المتاحة له حسب مستواه. يتم خصم تكلفة البذور من رصيده.
2.  **النمو:** يمر المحصول بمراحل نمو بصرية متعددة. يتأثر وقت النمو الإجمالي بعدة عوامل.
3.  **الحصاد:** عندما يكتمل النمو، يصبح المحصول جاهزًا للحصاد. يقوم اللاعب بالنقر عليه لجمعه وإضافته إلى مخزونه.

### العوامل المؤثرة على النمو:

-   **الفصول (Seasons):** لكل محصول معامل نمو مختلف في كل فصل. بعض المحاصيل تنمو أسرع في الصيف، والبعض الآخر في الربيع أو الخريف.
-   **الطقس (Weather):** حالات الطقس المختلفة لها تأثير مباشر على سرعة النمو:
    -   **ممطر (Rainy):** +20% سرعة نمو.
    -   **مشمس (Sunny):** +10% سرعة نمو.
    -   **ثلجي (Snowy):** -30% سرعة نمو.

### نموذج بيانات المحصول (Crop Data Model):

كل محصول يتم تعريفه بمجموعة من الخصائص:
-   `id`: معرف فريد (مثل `wheat`).
-   `name`: اسم العرض (مثل "Wheat").
-   `plantCost`: تكلفة الزراعة.
-   `sellPrice`: سعر البيع الأساسي (قبل تعديلات السوق).
-   `growthTime`: وقت النمو بالمللي ثانية.
-   `unlockLevel`: المستوى المطلوب لفتح المحصول.
-   `seasonModifiers`: معاملات النمو لكل فصل.
-   `growthStages`: مصفوفة تحدد المظهر البصري لكل مرحلة من مراحل النمو.

---

## 3. تقدم اللاعب (Player Progression)

يعتمد تقدم اللاعب بشكل أساسي على نظام المستويات ونقاط الخبرة (XP).

-   **نقاط الخبرة (XP):** يكتسب اللاعب XP من معظم الأنشطة في اللعبة:
    -   حصاد المحاصيل.
    -   جمع المنتجات الحيوانية والمصنعة.
    -   إكمال المهام.
    -   بيع المنتجات في السوق.

-   **المستويات (Levels):** عندما يجمع اللاعب ما يكفي من XP، يرتفع مستواه. كل مستوى جديد:
    -   يفتح محاصيل جديدة.
    -   يفتح مبانٍ ومصانع جديدة في المتجر.
    -   يمنح مكافآت (مثل Coins).

-   **نظام الفتح (Unlocks):** المحتوى الجديد في اللعبة مرتبط بشكل مباشر بمستوى اللاعب. هذا يخلق شعورًا دائمًا بالتقدم ويمنح اللاعب أهدافًا جديدة يسعى للوصول إليها.

---

## 4. الاقتصاد والموارد (Economy & Resources)

-   **العملة الأساسية (Coins):** هي العملة الرئيسية في اللعبة. تستخدم لشراء البذور، المباني، التوسعات، والترقيات. يتم كسبها بشكل أساسي عن طريق بيع المنتجات.
-   **المخزون والتخزين (Inventory & Storage):**
    -   لدى اللاعب سعة تخزين محدودة (`storage.max`).
    -   جميع المنتجات التي يتم حصادها أو جمعها يتم تخزينها في المخزون (`inventory`).
    -   إذا كان المخزون ممتلئًا، لا يمكن للاعب جمع المزيد من المنتجات حتى يقوم ببيع بعضها أو زيادة سعة التخزين. هذا يضيف طبقة من الإدارة والتخطيط.
