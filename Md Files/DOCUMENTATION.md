# توثيق مشروع Gemini Farm

## 0. هيكل المشروع والتنظيف

**ملاحظة:** خضع هذا المشروع لعملية تنظيف هيكلية للالتزام بالبنية القائمة على الأنظمة (System-Based Architecture) المحددة في ملف `GAME_RULES.md`. تم إزالة المجلدات القديمة من بنية سابقة (`src/components`, `src/services`) ومحتوياتها لتحسين الوضوح وقابلية الصيانة. الكود الحالي موجود بالكامل داخل مجلدي `src/systems` و `src/shared`.

---

## نظرة عامة

هذا المستند يلخص الحالة الحالية لمشروع "Gemini Farm"، وهي لعبة زراعة حديثة مبنية باستخدام Angular و Gemini. يوضح المستند ما تم إنجازه حتى الآن، وما تبقى في خارطة الطريق، ويسلط الضوء على القدرات التقنية لكل جزء من اللعبة.

---

## 1. ما تم إنجازه (Completed Features)

لقد أكملنا بنجاح جميع مراحل MVP والمراحل الأربع الأولى من المرحلة الثانية (Phase 2)، مما نتج عنه لعبة قابلة للعب بالكامل مع أنظمة متقدمة وعميقة.

### ✅ MVP (الحد الأدنى القابل للإطلاق) - مكتمل بالكامل

- **(MVP-1 - MVP-2)**: تم بناء الهيكل الأساسي للتطبيق (UI Skeleton) والمشهد الرئيسي للمزرعة مع واجهة المستخدم (HUD).
- **(MVP-3)**: نظام الشبكة (Grid) يعمل مع فتح تدريجي للأراضي (5 قطع في كل مرة).
- **(MVP-4)**: تم اعتماد العرض الثابت (Fixed View) لتسهيل التحكم.
- **(MVP-5 - MVP-6)**: دورة اللعب الأساسية مكتملة: زراعة، نمو، حصاد، وبيع المحاصيل مع نظام اقتصادي ومخزون.
- **(MVP-7)**: يمكن وضع الكائنات (مباني، ديكورات) مع نظام سحب وإفلات (Drag/Drop) ومنع تداخل دقيق (Collision).
- **(MVP-8)**: نظام الحيوانات يعمل، حيث تنتج الحظائر موارد يمكن جمعها.
- **(MVP-9)**: نظام المصانع الأساسي يعمل، مع شريط تفاعلي للإنتاج والتحصيل.
- **(MVP-10 - MVP-11)**: تم إضافة مهام أولية ولوحة متصدرين (Leaderboard) بسيطة.

### ✅ Phase 2 (مرحلة التوسعة العميقة) - الأجزاء المنجزة

- **(P2-1) نظام مهام الذكاء الاصطناعي (AI Tasks Generation)**:
  - تم استبدال المهام الثابتة بنظام ديناميكي يستدعي Gemini API.
  - يقوم النظام بتحليل حالة اللاعب (المستوى، المخزون، المصانع) لتوليد مهام مخصصة ومناسبة.

- **(P2-2) السوق الديناميكي (Dynamic Market)**:
  - تم بناء نظام يغير أسعار بيع المحاصيل والمنتجات بشكل دوري.
  - يدعم "أحداث السوق" (Market Events) التي تسبب طفرات أو انخفاضات في أسعار سلع معينة، مما يضيف عمقًا استراتيجيًا.

- **(P2-3) العمال والأتمتة (Workers / Automation)**:
  - تم تقديم أول عامل آلي: "Harvester Bot".
  - يمكن للاعب تفعيل العامل ليقوم بالحصاد وجمع المنتجات من الحظائر والمصانع تلقائيًا، مما يضيف عنصر اللعب الخامل (Idle Gameplay).

- **(P2-4) المصانع المتقدمة (Advanced Factories)**:
  - تم تطوير المصانع بالكامل لتشمل:
    - **قوائم انتظار (Queues)**: يمكن إضافة عدة مهام إنتاج متتالية.
    - **ترقيات (Upgrades)**: يمكن للاعب ترقية المصانع لزيادة سرعتها وحجم قائمة الانتظار.
    - **التشغيل التلقائي (Auto-run)**: يمكن ضبط المصانع لتعيد إنتاج نفس الوصفة تلقائيًا بعد جمع المنتج.

---

## 2. ما تبقى (Remaining Features)

التركيز الآن ينصب على إكمال الميزات المتبقية من المرحلة الثانية لإضافة المزيد من العمق والتفاعل الاجتماعي.

### ⏳ Phase 2 - الأجزاء المتبقية

- **(P2-5) نظام الحيوانات المتقدم (Animals Advanced)**: إضافة ميزات مثل التغذية، التعزيزات (Boosts)، والسلالات النادرة.
- **(P2-6) الفصول والطقس (Seasons & Weather)**: إضافة تأثيرات بصرية ووظيفية للفصول الأربعة وحالات الطقس المختلفة على المحاصيل والأسعار.
- **(P2-7) النظام الاجتماعي الحقيقي (Real Social)**: بناء نظام حسابات للاعبين (باستخدام Firebase Auth)، ملفات شخصية، وإمكانية زيارة مزارع الأصدقاء.
- **(P2-8) لوحة المجتمع المتقدمة (Advanced Community Board)**: نظام تفاعلي لطلبات المساعدة، التحديات الجماعية، والتجارة بين اللاعبين.
- **(P2-9) المخططات (Blueprints)**: نظام لحفظ ومشاركة تصميمات المزرعة.
- **(P2-10) اقتصاد الديكورات (Cosmetics & Decoration Economy)**: إضافة متجر خاص بالديكورات وعناصر التجميل مع نظام نقاط جمال للمزرعة.

---

## 3. مميزات كل جزء في التطبيق (Feature Highlights)

- **أساس متين ومبني على Angular Signals**: التطبيق بأكمله يستخدم Signals لإدارة الحالة، مما يوفر أداءً عاليًا وواجهة مستخدم سريعة الاستجابة وخالية من الأخطاء.
- **اقتصاد ديناميكي**: نظام السوق يمنع اللعب الروتيني ويشجع اللاعب على التخطيط الاستراتيجي للبيع في أفضل وقت.
- **مهام ذكية ومخصصة (AI-Powered)**: استخدام Gemini API يضمن أن المهام اليومية متجددة دائمًا ومناسبة لمستوى كل لاعب، مما يزيد من متعة اللعب على المدى الطويل.
- **أتمتة ذكية وقابلة للتطوير**: نظام العمال الآليين لا يقلل فقط من الأعمال المتكررة، بل يفتح الباب لإضافة المزيد من العمال بوظائف مختلفة (زارع، جامع، مدير...).
- **عمق استراتيجي في الإنتاج**: المصانع المتقدمة تحول الإنتاج من عملية بسيطة إلى جزء استراتيجي في اللعبة يتطلب إدارة الموارد والتخطيط للترقيات.

---

## 4. إمكانيات التطوير المستقبلية (Future Development Potential)

الهيكل الحالي للتطبيق يسمح بالعديد من التوسعات المستقبلية:

1.  **توسيع المحتوى**: يمكن بسهولة إضافة المزيد من المحاصيل، الحيوانات، المصانع، والوصفات دون الحاجة لتغيير الأنظمة الأساسية.
2.  **تكامل أعمق للذكاء الاصطناعي**:
    - استخدام Gemini لتوليد أحداث وقصص ديناميكية داخل اللعبة.
    - إنشاء شخصيات غير قابلة للعب (NPCs) تتفاعل مع اللاعب وتقدم له نصائح أو مهام فريدة.
    - تحليل تصميم مزرعة اللاعب وتقديم اقتراحات لتحسينها.
3.  **تكامل الخلفية (Backend Integration)**:
    - استخدام Firebase (Firestore, Auth, Cloud Functions) لتخزين بيانات اللاعبين، المصادقة، وتنفيذ العمليات الحساسة (مثل البيع والشراء) على الخادم لمنع الغش.
4.  **ميزات اجتماعية متقدمة**:
    - بناء نظام نقابات (Guilds) أو تجمعات (Cooperatives) تسمح للاعبين بالتعاون في مهام ضخمة.
    - تفعيل التجارة المباشرة بين اللاعبين.
5.  **نظام تحقيق الدخل (Monetization)**:
    - يمكن إضافة عملة مميزة (Gems) لشراء عناصر تجميلية حصرية أو لتسريع بعض العمليات.
    - تقديم "Battle Pass" موسمي مع مكافآت حصرية.